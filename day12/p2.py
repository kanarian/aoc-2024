from collections import deque

inp_test="""AAAA
BBCD
BBCC
EEEC"""

inp_test_sep_regions="""OOOOO
OXOXO
OOOOO
OXOXO
OOOOO"""

inp_larger="""RRRRIICCFF
RRRRIICCCF
VVRRRCCFFF
VVRCCCJFFF
VVVVCJJCFE
VVIVCCJJEE
VVIIICJJEE
MIIIIIJJEE
MIIISIJEEE
MMMISSJEEE"""

inp_larger_easier="""OOOOOOOOOO
OOOOOOOOOO
OOOOOOOOOO
OOOOOOOOOO
OOOOOOOOOE
OOOOOOOOEE
OOOOOOOOEE
OOOOOOOOEE
OOOOOOOEEE
OOOOOOOEEE"""

inp_e="""EEEEE
EXXXX
EEEEE
EXXXX
EEEEE"""

inp_ab="""AAAAAA
AAABBA
AAABBA
ABBAAA
ABBAAA
AAAAAA"""

inp_real="""DDDDDDDAAAAAAAAAAAAAAAAIIIIIIIIEEEEEEEERRRRRBBBBBRRRRRRRRRRRRIUUUIXIIIIIPPPPPPPPPPPPPPWWPPPPPPPPXXXXHXXUUUUUUUUUUUUUUUPWWWWWWWWWCJJJJJJZZZZZ
DDDDDDAAAAAAAAAAAAAAAAAAIIIIIIIIEEEEEERRRRRBBBBBBBBRRRRRRRRRIIUUUIIIIIIIPIPPPPPPPPPPPPPWPPPPPPPXXXXXXXXUUUUUUUUUUUUUUUPWWWWWWWWWJJJJJJJZZZZZ
DDCCCCCAAAAAAAAAAAAAAAAAAIIIIIIEEEEEEERRRRRBBABBBBBRRIRRRRRRIIIIIIIIIIIIIINNPPPPPPPPPPPWPWWWPPPXXXXXXXXUUUUUUUUUUUUUUUPPPWWWWWWWJJJJJJZZZZZZ
DDCCCCAAAAAAAAAAAAAAAAAAAIIIIEEEEEEEEERRRRRBBBBBBBBRRIRRRIIIIIIIIIIIIIIIINNPPPPPHPHHPPPWWWWWWWXXXXXXXXVVUUUUUUUUUUUPUPPPPPWWWWWJJJJJJJZZZZZZ
CCCCCCCAAAAAAAAAAAAAAAAAEIIIIIIIEEEEEERRRRRRBBBBBBBIIIIIIYIIIIIIIIIIIIIIINNNPPPPHHHHPPWWWWWWWYXXXXXXVVVUUUUUUUUUUUUPUPPPPPPWWWWJJJJJJJJZZZZZ
CCCCCCCATTAAALAAAAAEEAAEEIIIIIIIEEEEEERRRRBBBBBBBBBIIIIIIIGDGIIIIIIIIINNNNNNPPPHHHHHPPWWWWWWXXXXXXXXVVVVVUUVUUUUUUUPPPPPPPPPPWWJJJJJJJJJZJZZ
CCCCCCCATTAAALAAAAAEEEEEEEIIISIIIEEEEEERRRBBBBBBBBIIIIIIIIGGGGIIIIIINNNNNNNNPPPPHHHHWWWWWWWWWWXXXXVXVVVVVVVVVUUUUUPPPPPPPPPPPWJJJJJJJJJJJJZZ
ZCCCCTTTTTAANAAAAAAEEEEEEEIIIIIIUEEEERRRRBBBBBBBBBIGIIIIIDGGGGGIIIIINNNNNNNNPPHHHHHHHWWWWWWWWXXXXXVVVVVVVVVVVUUUUPPPPPPPPPPPSJJJJJJJQJJJJJZZ
CCCCCCCTTTATAAAAMEEEEEEEEUIUIIUUUUEEERRRBBBBBBBBBBDDIIIIIDGGGJGIIIIIINNNNNNNNNNTHHHHHWWWWWWWWWXXXXVVVVVVVVVVUUUUUPPPPPPPPPPPPSSUUJJJQJJJJJZZ
CCCCCCTTTTTTAAAAEEEEEEEEEUUUUUUUUUUEEEUUUUBBBBBBBBBDIIDDDDGGGGGGIIIIINNNNNNNNNNTHHHHHHWWWWWWBWXVVVVVVVVVVVVVVVUUPPPPPPPPPPPPPSPUUJJJQKJJMJZZ
CCCCCCCTAAAAAAAAAEEEEEEEUUUUUUUUUUUUUUUUUUBUBBBBDDDDDDDDDDGGGGIIIIISNNNNNNNNNNNNHHHHHWWWWWWBBWCVZZVVVVVVVVVVVVUUPPPPPPPPPPPPPPPUUUUQQQAQQQZZ
CCCCCCCAAAAAAAAAEEEEEEEGUUUUUUUUUUUUUUUUUUUUUBBBDDDDDDDDDDGGGGGRPPPPPPNNNNNNNHHHHHHHWWWWWWWWWWWZZZZVVVVVVVVVVVVVFPPPPPPPPPPPPPPUUUUBQQQQQQQZ
KCCCCKAAAAAAAAAAAEEEEEEEEUUUUUUUUUUUUUUUUUUUUBBDDDDDDDDDDDDGGGPRPPPPPNNNNNNNNHHHHHHHHWWWWWWWZZZZZZZVVVVVVVVVVVVVVPPPPBBPPPPPPIIUUUBBQQQQQQQQ
KKCCCKAAAAAAAAAARRAPENNNPUPUUUUUUUUUUUUUUUUKDDDDDDDDDDDDDDDGPGPPPPPPNNNNNNNNNHHHHHHWWWYWWWWZZZZZZZZZZVVVVVVVVVVVQQBBBBBBPPPPPPIUUUUBBQQQQQQQ
KKCCKKAYAAAAAAAAAAAPENNNPPPPUUUUUUUUUZZZZZKKKDKDMMDDDDDDDDDDPPPPPPPPPPNNNNNNNNHHHHHHWYYWWWWWWZZZZZNZZVVUVVVVVVQVQQQBBBBPPPPPPPJUBBBBQQQQQQQQ
KKKKKKAAAAAAAAAAAAAPENNNPPPPPUUJUUUUZZZZZZKZKKKDDDDDDDDDDDDDPPPPPPPPPPIINNNNNHHHHPHHWWWWWWWWWZZZNNNZZZVUUUUUVVQQQJJQQQBBPPPMPJJJJJJQQQQQQQQQ
KKKKKKAAAAAAAAAAAAPPPNNNPPPPPPPJUUUZZZZZZZZZZKKDDDDDDFDDDDDPPPPPPPPPPPNNNNNNNHPPPPHWWWWWWWWWWZZZNNNNNNVUUUUUUQQQQQQQQQQBBRRRRRJJJJJQQQQQQQQQ
KKKKKKKKATAAAAAGJPPPJNNNJJPMPPJJJUUUZZZZZZZZZKKDDDDDDFDDDDDDPPPPPPPPPMMMNNNZNNPPPPWWHWWPWWWWNZZZNNNVVNVUUUKKQQQQQGGQQRQRRRRRRRJJJJJJJFQQFFFF
KKKKKKKKKTTAAAGGJJJJJNNNJJJJJPJJJUUUUZLZZZZZZKKDDDDFFFDDDDDDDVPPPPPPPPPMNNNNCCCCPPPWHPPPWWWWNNNNNNNVVNVVVUKKQQQQQRGRRRRRRRRRRRRERJJJJFFFFFFF
KKKKKKKKKTTTTTGGGJJJJNNNJJJJJJJJOUUUUUZZZZZZZKKDKKDFFFFFFDDDDPPPEPPXPZPMMMMMMMMCPPPPPPPPWPWWNNNNNNNVVVVVVUKKKQQQRRGRRRRRRRRRRRRRRRJZBFFFFFFF
KKKKKKKKKTTTTTTGGGJJJNNNJJJJJJJFOOUUUUZZZZZZZKKKKKDPFFFFFFFFEEEEEDDDMMMMMMMMMMMMPPPPPPPPPPPWNNNNIINVVVVVVVKKKKBBBRGRRRRRRRRRRRRRRRRBBBFFFFFF
KKKKKKKTKTTTTTTTTJJJJNNNJJJJJJJFOOUAUNNZZZFFZKKKHKHPFFFFFFFFEEEEEEDDDDDMMMMMMMMUPPPPPPPPPPPPPNNIIIVVVVVVVBBBKKBBRRRRRRRRRRRRRRRRRRSBBBBBFFFF
KKKKKKTTKKTTKKKKGJJJJNNNJJJJJJJOOOOAUNNZZFFFFKKKHHHHFFFFFFFFEEEEEDDDDXXXXMMMMMMPPPPPPPPPPPPPQHNIIIVVVVVVVBBBBBBBBRRRRRRRRRRRRRRRRRRBBFFFFFFF
KKKKKKTTTTTTKKKMMJJJJJJJJJJJJJJJOOOONNNNZNNNHHHHHHXXFFFFFFFEEDEEDNDDDDXXXXMMMMMMPPPPPPPPPPPPQHNIIVVVVVVVVBBBBBBBBBRRRRRRRRRRRRRRRRBBBBBFFFFF
KKKKKKKTTTKKKKKMMRJJJJJJJJJJJJJJOOOOONNNNNNHHHHHHHXXFIFFFFFFDDDDDDDDDDXXXXXXMHHHPPPPHHPPPPPQQHHIIVVVVVVVVBBBBBBBBBRRFFRRRRRRRRRRRBBBBBBBFFFF
KKKKKKKKMTKKKKKMMMJMMMMJJJJJJJJOOOOOONNNNNNHHHHHHHHHFFFFFFDRDDDDDDDDDXXXXXXXMHHHPPPPHHPPPPPPHHHIIVZZZZZBBBBBBBBBBBRKFFFFRRRRRRRBRRRBBBBBBFFF
KKKKEEKMMOKKKJMMMMMMMMMJJSJJJJJOOOOOOONNNNGHHHHHHHHIFFFFFDDDDDDDDDDDDXXXXXXXXXHHHHPHHHHPPPPPHHZIIZZZZBBBBBBBBBBBFFKKFFFRRRFRFFFBBRRBBBBBBBBF
KKKKKOOOMOKKKOMMMMMMMMMMMSJJJJJOOOOOOONNNNGHHHHHHHHHFFFFDDDDDDDDDDDDDDDDXXXXXXHHHHHHHHHPPPHHHHZIIZZBBBBBBBBBBBBBFFFFFFFFFFFFFFBBBBBBBBBBBBBB
KKKKKOOOOOKKOOFMMMMMMMMMMMJJJJOOOOOOOONNNNGHHHHHHIHLFFFFFDZDDDDDDDDDDDDXXXXXXXXHHHHHHHHHPPHHHOZIZZZZZBBBBBBBBBBBFFFFFFFFFFFFFBBBBBBBBBBBBBBB
KKKKOOOOOOOOOOMDMMMMMMMMMMFFJOOOOOOZZZNZNZGHHHHHHHHLFFFFFDDDDDDDDDDDDDDXXXXXXXXXXXXHHHHPPPHHHZZZZZZZZBBZZWWBBWWFFFFFFFFFFFFFFBBBBBBBBBEEEBBB
KEOOOOOOOOOOOOMMMMMMMMHMMMIFFFOOOOOOZZZZZZGHHHHHHHHFFFFFFFDDDDDDDDDDDXXXXXXXXXXXHXXHHHHHHHHHHZZZZZZZZZBZZQWWWWWFFFFFFFFFFFFFFFBFBBBBBVEEBBBE
EEOOOOOOOOOOOOMMMMMMMMHHIIIBFOOOOOOOZZZZZZGGGHBVYHHFFFFFFFPPDDDDDDDNNNXXXXXXXXXXHXHHHHHHHHHHHWZZZZZZZBBZZWWWYWWFFIFFFFFFFFFFFFFFDDBBBBBEEEEE
EEOOOOOOOOOOOOXMMGMMZMMHIIZUUUOUUUOUUZZZZZGCVVVVVVHFFFFFFPPPDDDDDDNNNNXXXXNCXXXXHXHHHHHHHHHHHZZZZZZZZZZZZZWWWWWFFFFFFFFFFFFFFFFFDDDBBBBEEEEE
EEEOOOOOOOOOOOOGGGMGMMHHHUUUUUUUUUUUUUZUZUCCCCVVVVEEAAFFFPPPZDDDDNNNNNNXNXNCCXCVHHHHHHHHHHHHZZZZZZZZZZZZZZWWWWWFWFFFFFFFFFFFFFFFDDDBBBBEEEEE
EEEOOOOOOOOOOOOGGGGGMMHUUUUUUUUUUUUUUUUUUUUUCVVVVEEEEAAFPPPPZDDDNNNHNNNNNNNNCCCVCCCCHHHHHHHHZZZZZZZZZZZZZWWWWWWWWWWWFFFFZZIIIFZIIIIBEEEEEEEE
EEEEOOOOOOOOXXGGGGGGGMMUUUUUUUUUUUUUUUUUUUUUCVVVCEEPPAAAPPPPZDDNNNNHNNNNNCCCCCCCCCCCCHHHHHHHZZZZZZZZZZZZZLWWWWWWWWWWFFFFIIIIIFFIIIOEEEEEEBEE
EEEEEEOOOOOOXXGGGGGGGGGGGUUUUUUUUUUUUUUUUUUCCVVVEEEPPPPPPPPPPJDDNNHHNHNNCCCCCCCCCCCCCHHHHHHZZZZZZZZZZZZZZZWWWWWWWWWWFFTFTIIIIIIIIIIIEEEBEBEE
EEEEEYYYOYYOXXXGGGGGGGGGGUUUUUUUUUUUUUUUUCCCCCCCCCEEPPPPPPPPPJJJIIHHHHNCJCCCCCCCCCCCCCCHHHHIIIIZZZTTZZDDZVJJJWWWWWWFFTTTTTIIIIIIIIIEEEBBBBBB
EEEREEYYYYYXXXTGGGGGGGGGKUUUUUUUUUUUUUUUUCCCCCCCCCEEPPPPPPPPPJIIISSHHCCCCCCCCCCCCCCCCCCCAHHHIIIIZZTTTTJJJJJJJWWWWWWFWWWIIIIIIIIIIIIIEEBBBBBB
HEEEEEYYYYXXTTTGGGGGGGGKKKKGUUUUUUUUAUUUCCCCCCCCCCCPPPPPPPPPJJIIISHHHHHHHCCCCCCCCCCCCCCCAAHHHIIIZEITTTTJJJJJJJWWWWWWWWIIIIIIIIIIIIIIWBBBBBBB
HHHHHYYYYXXXXTTTGTGGGGKKKKKUUUUUUUULAAAAAWWWWWWWCCPPPPPPPPPPJJJIITHHHHHHCCCCCCCCCCCCCCCAAAAIIIIIIIITTTTTJJJJJJJWWWWWWWIIIIIIIIIIIIIIBBBBBBBB
HHHHYYYYYYXXXTTTGTGGGGKKKKKKLLUUAUULAAAAAWWWWWWWWWWWPPPPPPPPPPTTTTHHHHHHCCCCCCCCCCCCCAAAAAAAIIIIIIIITTTTJJJJJJJWWWWWWWWIIIIIIIIIIIIICCBBBBBB
HHHHHYYYYYYTTTTTTTTTTGGKKKKLLLULAAAAAAAABWWWWWWWWWWWPPPPWWPTPTTTTTTHHHHHCCCCCCCCCCCCCCAAAAAIIIIIIIIITTTTJJJJJJJWWWWWWVVIIIIIIIIIIIIIIIBBBBBB
HHHHHHHHYYYUTTTTTTTTTTTTTCKKLLLLAAAAAAAABWWWWWWWWWWWPPWWWWWTPTTTTTTHHHHHHTCCCCCCCCCCCAAAAAIIIIIIIIIITTTJJJJJJJJWWWWWVVVIIIIIIIIIIIIIIBBBBBBB
HHHHHHHHYYYUUTTTTTTTTTTUUKKKLLLAAAAAAAAAAWWWWWWWPPPPFFWWWWWTTTTTTTTHHHHHHTTTTTCCCCCAAAAAAAAAIIIIIIIIITTTJJJJJJJPWWWVVVVVVVIIIIIIIBBIBBBBBBBB
HHHHIHIHYHHUUTTTTTTTTTTTTEKLLLLLAAAAAAAPJWWWWWWWPPPPFFWWWWWTTTTTTTTTTHHHHTTTTTCCCCJAAAAAAAAAIIIIIIIIIITTTJJPJJJPPWWVVVVVVVVIIIIIBBBBBBBBBBBB
HHIIIIIHUUUUUUTTTTTTTTTTEEKWWLLLACAGAAAPPWWWWWWWPPPFFFFWWTTTTTTTTTTTTHHHTTTTTTTTTQJAAAAAAAAAIIIIIIIIIITCTTJPPPPPPPPVPVVVVVVTTTIIBBBBBBBBBBBB
IIIIIIZUUUUUUTTTTTTTTTTTTTPWWWPPPPBAAPPPPWWWWWWWPPPFFFFFFLLLLTTTTVTTTTTTTTTTTTTTTQQLAAQQAAQIIIIIIIIICCCCTPPPPPPPPPPPPVVVEVEETTIIBBBBBBBBBBBB
IIIIIIZUUUUUTTTTTTTTTTTTTDWWWWWPPPBBPPPPPWWWWWWWPFFFFFFLLLLLLLEVETTTTTTTTTTTTTTTTTQQWQQQQQQLIIIIYIIPPPCCCCPPPPPPPPPPEVVVEVEETTIIPBBBBBBBBBBB
IIIIIIIIUUUUUUTTTTTTTTTTTWWWWWPPPBBBPPPPPPPPPPPPPPFFFFLLLLLLLLEEEEEETTTTTTTTTTTTTQQQQQQQQQQQIIIIYNIPPPPPCCCPPPBPPPPPEEEEEEETTTITPBBBBBBBBBBB
IIIIIIKKUUUUUUTUUTTTGTGGGWWQWWPPPBBBPPPPPPPPMMPMPFFFFFLLLLLLLLEEEEEETTTTTTTTTTTTTQQQQQQQQQQQQQQYYNNNNPPCCCCCPPBPPPPPEEEEEEETTTTTBBBBBBBBBBBB
IIIIIIIIUUUUUUUUTTTTGGGGGWJWWPPPPBBBBPPPPPMMMMMMMFFFFFLLLLLLLLEEEEEEEEEAATTTTTQTTQQQQQQQQQQQQQQQYNNNPPPCCCCCCCBBPPPEEEEEEEEETTTTBBBBBBBBBBJJ
IIIIIIIIUUUUUUUUTTTTGGGGGWWGPPPPPPPBBPBPEPJMMMMMFFFFFFFLLLLLLLLEEEEAAEAAATAAQQQQQQQQQQQQQQQQQQHHYNNNPPPCCCCCCCCBPPPEEEEEEEEEETTTTBBHBBHHBBBB
IIIIIIIUUUUUUUUUTTTGGGGGGGGGGPPPPPPBBBBMMJJMMMMPPFFFFFFFLLLLLLEEEEAAAAAAAAAAAQRQQQQQQQQQQQQQQHHHHJNPPPPPGGCCCCCPPPEEEEEETTTEETTTTHHHBHHBBBBB
IIIIIIUUUUUUUUUUUUWWGGGGGGGGGPPPPPPPMBMMMMMMMMMMMFFFFFFLLLLLLLEAAAAAAAAAAAOOOOOQZZQQQQQQQQQQHHHHHHPPPPPPJGGCCCCGGGEEEEETTTTTTTTTTTHHRHHHBBBB
MIIIIIUUUUUUUUUUUUWWWGGGGQQGGGPPPPPPMMMMMMMMMMJJJFFFFFLLLLLLALAAAAAAAAAAAAOOOOOQZZQQQQQQQQQQHHHHHHPPPPPGGGGCGGGGGGEGGEETTTTTTTTTTHHHHHHHHBBB
IIIIIOUUUUUUUUUUUWWWWWQQQQQGPPPPPLPMMMMMMMMMMMMJJJFFXXLLLLAAAAAAAAAAAAAAAAOOOOOZZZZQQBBBBBBBWWHHHPPPPPPGGGGGGGGGGGGGTTTTTTTTHTHHHHHHHHHHBBBB
IIIILUUUUUUUUUUUWWWWWGQQQQQQQQPPPLPMMMMMMMMMMMMJJJJFXXXXLLLLAAAAAAAAAAAAAAOOOOOYBBBBBBBBBBBBWWWHHPPPPPGGGGGGGGGGGSSSTTTTTTTTHHHHHHHHHHHHHBBB
SIIILLUUUUUUUUUWWWWWWGQQQQQQQQQPQMMMMMMMMMMMMMMJJJJFXXXXXLAAAAAAAAAAOOOOOOOOOOOYBBBBBBBBBBBBWZHHHPPPPPGGGGGGGGGGSSSSSTTTTQQQHHHHHHHHHHHHHHHH
SIIILLUUUUUUUUUWWWWWGGQQQQQQQQQQQMMMMMMMMVVVVMJJJJJXXXXXXXYAAAAOOOOOOOOOOOOOOYYZBBBBBBBBBBBBZZZZPPPPPPGGGGGGGGGGGSSSTTTTTTQQQHGGHHHHHHHHHHHH
CCCCCCCUVVUUUUWWWWWQQQQQQQQQQQQQQQMMMMMMVVVZVVJJJJXXXXXXXXAAAAAOOOOOOOOOOOOOOYYZBBBBZBBBBBBBZZZPPPPPPGGGGGGGGGGGSSGRTTTTQQQQQGGGHHHHHHHHHHHH
CCCCCCCCCCPKUUWWWWWQQQQQQQQQQQQQQQMMMMVVVVVVVVVVJXXXXXXXXXNNAALOOOOOOOOOOOOOOYYYBBBBZBBBBBBBJZZOPPPPPPPGGGGGGGGGGGGGTTTTTTQQQQMMSSHHHHHHHHHH
SSCCCCCCCCKKWWWWWWQQQQQQQQQQQQQQQMMMMVVVVVVVVVVXXXXXXXXXBBNNDALOOOOOOOOOOOOOOYYZBBBBBBBBBBBBZZZOPPPPPPUUGGGGGGGGGGGGGTTTTTTQQZMMSSHKHKKKKKKK
SCCCCCCCCKKWWWWWWWWQQQQQQQQQQQQQQQMMMMMVVVVVVVVQXXXXXXXXXBNNDAAOOOOOOOOOOOOOOYNNBBBBBBBBBBBBZOOOPPPPPUUUGGGGGGGGGGGGGTTTTTTQQZMMSSHKKKKKKKKK
SCCCCCCCUKFWWWWWWWWWQQQQQQQQQQQQQEEMMMMVVVVVVVVVXXXXXXXXXXNNNAAOOOOOOXXXXXXXXYYNBBBBBBBBBBBZZOEEEEPPPUUUUGGGGGGGGGGGGGUUTZZZZMMMSMMMJJKKKKKK
SSSCCCCCUGGGGWWWWWWWQQTQQQQQQEQQQEEMMMMMVVVVVVEEEXXXXXXXXNNNNNGOOOXXXXXXXXXXXQXNBBBBBBBBBBBZUUBEEEUUUUUUUUKGGGGGGTGGGGUUTZZZMMMMMMMMJJKKKKKK
CCCICCCCGGGGGWWWWWWWWQQQQQQQQEEEEEEEEMMMVVVVVVEEEGXXXXXNXXNNIDGOOOXXXXXXXXXXXQQNBBBBBBBBBBBZUUUUUEUUUUUUUUUGGUGCCTTGUUUUUZZZPMMMMMMMJJKKKKKK
CCCCCCCGGGGGGWWWWWWWWQQQQQQQQEEEEEEEEMMVVEVEVVEGEGGXRXNNDDDDDDGOOOXXXXXQQQQQQQQNNNBBBBBBBBBBBBUUUUUUUUUUUUUNCCCCCTCCCUUUUUUUUUUUUUUMMKKKKKKK
HCCCCCCGGGGGGGGGWWWWWWWQQQQQQEEEEEEETTTTVEEEEEEGGGGXXMDDDDDDDDDGXXXXXXXXXQQQQQQQNNBBBBBBBBBBBBUUUUUUUUUUUUUUCCCCCCCCCCZUUUUUUUUUUUUMKKKKKKKK
HCOCCCCGGGGGGGGGWWWWWKKKKQVVQEEETTTTTTTTTEEEEEEGGGGGVPXDDDDDDDDDDCCXXXXXXQHQQQQQQVBBBBBBBBBBBBUUUUUUUUUUUUUCCCCCCACCCCZUUUUUUUUUUUUOKKKKKKKK
CCCCCCCGGGGGGGGGGGWWIKKEEEVEBBEETTTTTTTTTEEGGGGGGGGGGPPPPPDDCCCCCCCXXXXXXHHQQQQQQVBBBBBBBBBBBBUUUUUUUUUUUUCCCCCCCCCCCCCKKKUUUMMMMMOOOKKKKKKK
CCJCWWWWGGGGGGGGGGWIIIKEEEEETBEETTTTTTTTTTTGGGGGGGGGEPBBBBDDBCCCCCCXXXXXXQHQQQZQQVBBBBBBBBBBBBUUUUUUUUUUUCCCCCCCCCCCCCKKKKUUUPPPPOOOOOKKKKKK
GCCCCGGGGGGGGGGGGGIIIKKEEEEETTTTTTTTTTTTTTGGGGGGGGGGBBBBBBDDBBBCCCCCCRQQQHHHQQQQQVBBBBBBBBBBBBIUUUUUUUUUUUCCCCCCCCCCCCCKKKUUUPPPOOOLOYKKKQQK
GGGGGGGGGGGGGGGGGGIIIIIEEEEETTTTTTTTTTTTTTGGGGGGGGGBBBBBBBBBBBCCCCCCCRRHHHHHQHHVVVBBBBBBBBIIIIIUUUUUUUUUUCCCCCCCCCCCCKKKKKPPPPPPPOOOYYYQQQQQ
GGXGGGEGGGGGGGGGIIIIIIIEEEEEETTTTTTTTTTBDTGGGGGGGGGGGBBBBBBBBBCCCCCCCRRHHHHHHHHHVHHHHHIIIIIIIIMMMMUUUUUUCCCCCCCCCCCCCKKKKKKPPPPOOOOYYYYQQQQQ
GXXGGGGGGGGGGGGGGIIIIIIEEEEETTTTTNTTTTTBDBBBGGGGGGGGGBBBBBBBBBBCCCCCCRLHHHHHHHHHHHHHHIIIIIIIIIIMUUUUUUIICCCCCCCCCCCCCKKKKKPPPPPOOPOYYYYYQQQQ
XXXXGGGGGGGGGGGGGIIIIIIEEEEETTTTTNNETTBBBBBBGGGGGGGGGGBBBBBBBBBCCCCCCCHHHHHHHHHHHHHHIIIIIIIIIIIMMMMMUIIIICCCCCCCCCCCKKKPPPPPPPPOOPOYYYYYQQYY
TXXGGGXCCGXGGGGGGIIIIIIEEEEEETTTTNNBBBBBBBBBBGGGGGGGGBBBBBBBBBBCCCCCCCCHHHHHHHHHHHHHIIIIIIIIIDHHMHHMUIIIICCCCIRRRRCCKKKKPPPPPPPPPPPYYYYYYYYY
TXXXGGXXXXXGGGGGGFITTIIEEEEEEETTNNNBBBBBBBBBBBBGGGGGGBBBBBBBBBBBBCCCCCHHHHHHHHHHHHHHHHIIIWWIHHMHHHHQHHIIIIIIIIRRRRKKKKNKPUPPPPPPPPPYYYYYYYYY
XXXXXXXXXFXYFFGGFFFTTTTTEEEEEEENNNNBBBBBBBBBBBBGGGGGGBBBBBBBBBBBBCCCCCHHHHHHHHHHHHPIIIIIIIWIHHHHHHHHHHIIIIIIRRRRRRKKKNNIINPPPPPPPPYYYYYYYYYY
XXXXXXXXJFFFFOOGGTTTTTTTTEEEEEEENNNBBBBBBBBBBBBGGGGGBBBBBBBBBBBBBCCCCCHHHHHHHHHHPHPIIIIIWWWBHHHHHHEEIRIIIIILLRRRRRKKKNNNNNPPPPPPYYYYYYYYYYYY
GXXXXXKXXFFFFFOOOTTTTTTTTEEEEEENNNNBBBBBBBBBBBBBGGGTRRBBBBBBBBBBBCCCCCHHHHHHHHHHPPPIIIIIWWWHHHHHHHEEIIIIIZLLLLLLLLKKKNNNTTTJPPPOYYYYYYYYYRYY
XXXXXXXXXFFOOOOXXTTTTTTTTEEEENNNNNNNBBBBBBBBBBBBBGGTRTTBBBBBBBBBHHCCHHTHHHHHHHHHPPIIIIIWWWWWHHHHHHHEEIIIILLLLLLLIIIIKINNNTTJPPPOYYYYYYYTYRRY
XXXXXFXXXFXXXXOXTTTTTTTTTEEEENNNNNBBBBBBBBBBBBBBBBTTTTTBBBBBBBBMMHHHHHHHBHHHHPPPPPPPPIPPWWWWUHHHHHHEEEIILMLLLLLLLIIKKINNNTTTTTTTYYYYZTTTYRRY
XXXXFFXXFFXXXXXXXXTTTTTTTEEEEMMMMBBBBBBBBBBBBBGGNNTTTTTTTTTBTBBBHHHHHHHHHHHHHPPPPPWPPPPWWWWWWWTHHHEEEIIELLLLLLLLIIIIIITTTTTTTTTYYYYTTTTTTRRR
XXXOXFFXFXXQXXXXXXXTTTTTTEEMMMMMMMBBBBBBBGGGGGGGGGTTTTTTTTTTTNNHHHHHHHHHHHHHPPPPPPWWPWWWWWWWWWWEEEEEEEEELLLLLLLLLIIITTTTTTTTTTRYYYYQTTTTRRGR
XXXXXFFFFFXXXXXXXTTTTTTTTTTTMMMMMMBBBBBBLLLGGGGHGGTTTTTTTTTTTNNNHHHHHHHHHPPPPPPPCCCWWWWWWWWWWWWWEEEEEEELLLLLLLLLLILLOTTTTTTTTTTTYQQQQTTTQRRR
XXXXFFFFFFXXXXXXTTTTTTTTTTTTTTMMMMBBMMLLLLLGGGGGGGTTTTTTTTTTTNNNHHHHHHHHHPPPPPCCCCCRWWWWWWWWWWEEEEEEEEELLLLLLLLLLLLLLTTTTTTTTTTTTQQQQTTQQRQQ
FFFFFFFFFFXXXXXXTTTTTTTTTTTXTTTMMMMMMMLLLLGGGGGGGGTTTTTTTTTTTTNVHHHHHHHHHHHPCCCCCCCCCWWWWWWWWEEEEEEEEEEVLLLLLLLLLLLLLTTTTTTTTTTTTQQQQTQQQQQQ
FFFFFFFFXXXXXXXXTTTTTTTTTXXXTSTXXMMMMLLLLLLLGGLTTTTTTTTTTTTTTVVVHHHHHHHHHHHCCCCCCCCCWWWWWWWWWWWWEEEEVVVVVVLVVLLVVVBBWWTTTTTTTTTTTTQQQQQXQXXQ
FFFFFFFFFXXXXXXXXTTTTTTTTTXXXXXXXXMMMMMLLLLLLOLDDDDDTTTTTTTQQQQQHWHHHHHHHCCCCCCCCCCCCWWWWWWWWWWWEWWEVVVVVVVVVVLVVVBBBWTTTTTTTTTTTTQQQQQXXXXX
FFFFFFFFFFXXXXXXJJTTTTTTTMXXXXXXXXXMIIMLLLLLLLLDDDDTTTTTTQQQQQQHHHHHHHHHHCCCQCCCCCCCWWWWWWWWWWWLWWWVVVVVVVVVVVVVVVPBBWTTTTTTTTTTTTQQQQQQQXXX
FFFFFFFFFFFXXXXJJTTTTTTTTMMXXXXXXXIIIILLLPLLDRDDDDDTTTTQTQQQQQEHHHHHHHHHHHHCCCCCCCZCWWWWWWWWWWWWWWWVVVVVVVVVVVVVVBBBBWTTTTTTTTTTTTQQQQQQQQXX
FFFFFFOFFFOIXIJJJJJJJJJJJXXXXXXXXXIIIIIELPLLDDDDDDDDTTQQQQQQQQEEHEEHHHHHHRRRRRCCCCZCEEWWWWWWWWWWWWWVVVVVVVVVVVVVVVBBBBTTTTTTTTTTTQQHHHQQQQXQ
FFFFOOOOOOOIIIIJJJJJJJJJJXXXXXXXUIIIIIIELILLDDDDDDDDTTQQQQQQQQEEEEHHHHVVVVVRRRCCJJJJJJWJJWWWWSDDWWWVVVVVVVVVVVVVBBBBBBBBTBBBBTTRTHHHHHHHHQXQ
FFFFFFFOOOIIIIIJJJJJJJJJXXXXIXXUUIIIIIIIIIIIEDDDDDDDQTQQQQQQQQEEVVVVVVVVVVVRRRCCJJJJJJMEEWWWSSSDSSWVVVVVVVVVVVVBBKBBBBBBBBBBBTTRRHHHHHHHQQQQ
FFFFFFOOOIIIIIYZJJJJJJJJIEIXIXUUUUIIIIIIIIIEEEEDDDDAQQQQQQQEEEEOVVVVVVVVVVVRRRCCJJJJJJJETTTTSVSDSSSVVVVVVVVVVVVBBBBBBBBBBBBBRRRRHHHHHHQHQQQQ
FFFFFFFOOOIYYYYJJJJJJJJIIIIIIUUUUUIIIIIIIIIEEEDDDDAAAQQQQQQEEEOKVVVVVVVVVVVRRRRRJJJJJJJEEETTSSSSSSSVVVVVVVVVVBBBBBBBBBBBBBBRRRRDHHHHHHQQQQQQ
FFFFFFFOOOOOYYYYYYYYJJIIIIIIIUUUUPIIIIIIIIIEEEDEDDDAAQQQQQQOEOOOOOOLXXVVVVVRRRRJJJJJJJOEEEEESSSSSSSSSVVVVVVVVBBBBBBBBFBFBBBBBDDDDDHHQQQQQQQQ
FHHFFOOOOOOOOYYYYYJJJJIIIIIIPUUUPPPPIIIIIIQQQEEEEDAAAAAQXQOOOOOOOOOOXXVVVVVRRRRJJJJJJJJEEEESSSSSSSSSVVVVVVVVJBJJBBBBBFFFBBBTTTDDDDHHQQQQQQQQ
HHHHFOOOOOOJOYYYYYJJJJIIIIIPPPUPPPPPIIIIIQQPPQQAAAAAAAXXXXOOOOOOOOOOXXVVVVVRJJJJJJJJJJJEEEESSSSSSSSVVVVVVJJJJJJJBBBBFFFFFBBTDDDDDDHHHQQQQQQQ
HHOOOOOOOOOOOYYYYYJJJJIIIIIIPPPPPPPPQQQQQQQQQQQAAAAAAAXXXXOOOOOOPOOOOXXXXXXRRJJRJJJEEEEEEEEEEESSSSSSVVVVVJJJJJJJJBBBFFFFFFBTDDDDDDDMQQQQQQQQ
HHHOOOOOOOOJJJJYJJJJJGGGIIIIPPPPPBPQQQQQNQQQQQQQQAAAAAAXXXOOOOOOOOOXXXXXXXRRRRRRJJJJEEEEEEEEEEESSSSSSVVVVDJAJJJJJJFFFFFFFFSDDDDDDDDQQQQQQQQQ
HHHHOOOOOOOJJJJJJJJJJGGGGGIPPPPPPBBQQQQQNNNNQQQQQAAAAAAAAXOOOOOOOOOXXXXXXXRRRRRRRRJEEEEEEEEEEEEEESSSSSVVSSAAJJJJJJFFFFFFFFDDDDDDDDDQQQQQQQQQ
HHHHHOOOOJJJBBBBBJJJGGGGGIIIPPPPPBBQQQQQNNNDQQLAAAAAAAAAXXXOOOOOOOXXXXXXJXRRRRRRREJEEEEEEEEEGEEEESSSSSSSSSSSBJJJJJJSFFFFFFFFDDDDDDDQQQQQQQQQ
HHHHHHHHHHJJBBBBBBBGGGGGGGIIIIPPPBBBQQQQNDNDQQLLAAGAKKKKXXXXXONOOOXXXXXXJXXRRRRRREEEEEEEEEEELEKEELSSSSSSSSSYJJJJJJJSFFFFFFLDDDDDDQQQQQQQQQQQ
HHHHHHHHBJJJBBBBBBBGGGGGEIIIIIPPPPBQQQQQDDNDLLLLLGGGGKKKXXXXXKNNOOXXXXXXJXRRRRRRRUEEEEEEEEELLLLEILLLLSSSSSSYJJJJJJJYFJJJFJJJDDDDDDQQQQQQQQQQ
HHHHHHHHBBBBBBBBBBBGGGGGGGGIIPPPPPPDDQQQDDDDLLLLLGGGGKKKKKXXXKNOOOJJJXJJJRRRRRRRREEEEEEEEELLLLLLLLLLLSSSSSSJJJJJJJJYYJJJJJJWDDDDDDQQQYYYQQQQ
HHHHHHHBBBBBBBBBBBBBGGGGGGGBBBBBPPDDDDDDDDDDLLLZLLGGGKKKKKKKKKNNNOJJJJJJJRRRRRRDDDDDEEEEEELLLLLLLLLLLLLSSSJJJJJJJJJYYYJJJJJJDDDKQQQQYYYYYQQQ
HHHHHHBBBBBBBBBBBBBBGGGGGGGGBBBBMMDDDDDDDDDDLLLLLGGGGKKKKKKKKKNJJJJJJJJJJJRRRRRDDDDDDDELLELLLLLLLLLLLLLLLSCCAJJJJJYYYJJJJJJJJJDGQQGGYYYYYQQQ
HHHHHHHHBBBBBBBBBBBBGGGGGGGGGBBMMDDDDDDDDDDLLLLLLGKKGKKKKKKKKKNJJJJJJJJJJJJRRRDDDDDDDEELLLLLLLLLLLLLLLLLASACAAAYJYYYYYYJXJJJJKGGGGGGGAYYQQQQ
HHHHHHHBBBBBBBBBBGGGGGGGGGGBBBBMMMDDDDDDDDDDLLRLXXKKKKKKKKKKKKNNUUJJJJJJJJJRRRRDDDDDDELLLLLLLLLLLLLLLLLAAAACAAAYJYYYYYYJXXEEJGGGRRRRAAYYIQQQ
HHHHHHBBBBBBBBBBBGGGGGGQQQGQBQQMMMDDDDILLLDLLLLLXXXKKKKKKKKKKNNNNUUJJUUJJJJJRJJJDDDDLLLAAAAALLLLLLLLLLIAAAAAAAAYYYYYYYXXXXXEEEGGRRRRGAYQQQQA
HHHHHHBBBBBBBBBBBBGHGGGQQQQQQQQMMMIIIIILHLLLLLQQXXXXXKKKKKKKKKNNNUUUUUUJJJJJJJJJJJDAAAAAAAAAALLLLLLLLAIAAAAAAAAAYYYYYXXXXXXGGGGGRRRRGAAAAAAA
HHHHHHHBBBIBBBBBBHHHGQQQQQQQQQQMIIIIIIIIIILLDDXQXXXXXXJJKKKKKKNNNNUUUUUUUUJJJJJJJAAAAAAAAAAAALLLLLLLLAAAAAAAAAAYYYYYYYYYYXXGGGGGRRRRGAAAAAAA
HHHHHHHHHIIIBBHBBHHHQQQQQQQQQQQMMIIIIIIIIIILIIXXXXXXXJJJKJJKKKNNNUUUUUUUUJJJJJJJJJGGAAAAAAAAALLLLLLLAAAAAAAAAAAAYYYYYYYYYYYYGGGGRRRRAAAAAAAA
HHHHHLLHHHHHBBHHHHHQQQQQQQQQQQQQIIIIIIIIIIIIIICCCCCCCCCJJJJJJUUUUUUUUUUUDUJJJJJJJGGAAAAAAAAAALLLLLLZOOAAAAAAAAAAAYYYYYYYYYGGGGGGRRRRGAAAAAAA
HLHHLLLLHHHHHHHHHHHHFQQQQQQQQQQQQIIIIIIIIIIIIICCCCCCCCCJJJJJJOOUUUUUUUUUUUJJJJJJJJAAAAAAAAAAALDDVVLZOOOAAAAAAAAAAYYYYYYYYYYYGGVGRRRRPAAAAAAA
HLLHLLLDHHHLHHHHHHHHQQQQQQQQQQQQQIIIIIIIIIIIHICCCCCCCCCJJJJJJJJJJUUUUUUUUUJJJJJJJJIIIAAAAAAAAXDDVVVOOOOAAAAAAAAAAAAYYYYYYYYYKKGGRRRRPAAAAAAA
HHLLLLLLLLHLLHHHHHHHXQQQQQQQQQQQUUIIIIIIIIIIHICCCCCCCCCCCCCJJJJJJUUUUUUUUUJJJJJJJJJIIAAAAXYXXXXXVVVVOAAAAAAAAAAAAAAYYYYYYCCCKKGGRRRRPPPPZZZA
LLLLLLLLLLLLLHYHHHHHXQQQQQQQQQQQUIIIIIIIIIIIIICCCCCCCCCCCCCJJJJJJUUUUUUUUUUMPJSJIIIIIIACXXXXXXXXVVVVAAAAAAAAAAAAAAYYYYYYYCCCKKRRRRRRPPPPMZZZ
LLLLLLLLLLLLLLYYYYYYXXXXQQQQQQQIIIIIIIIIIIIIIICCCCCCCCCCCCCJJJJJJUUUUUUUUMMMMSSSISIIIICCCXXXXXXXXVVVVVVVAAAAAAAALLYYYYYCCCCCCCPPPPPPPPPPZZBZ
LLLLLLLLLLLLVYYYYYYYXXXXXQQQQQQIIIIICCIIIIIIIICCCCCCCCCCCCCCCJJJJUUUUUMMMMMMMMSSSSSSSICXXXXXXXXXXXXXVVVVAAVAAALLLLYYYYYCCCCCCCCCPZPPPPPPZZZZ
LLLLLLLLLLLLVYYYYYYXXXXXQQQQQQIIIIIIIIIIIIIIMIGGGGGGGUCCCCCCCJJJJJUUUUMMMMMMMSSSSSSSSSSUXXXXXXXXXXXVVVVVAAVAVAALVCYYYYCCCCCCCCCCPPPPPPPPPPOO
LLLLLLLLLLLLYYYYYYXXXXXXQQQYIQIIIIIIIIIIIIIIMGGGGGGGGGCCCCCCCJJJJJJJUUMMMMMMSSSSSSSSSSSSXXXXXXXXXXXVVVVVVVVVVVVVVCYYYYCCCCCCCCCCPPPPPPPPPOOO
LLLLLLLLLLLLYYYYYYXXXXXXXQXIIIIIIIIIIUIIIIIIMGGGGGGGAACCCCCCCJJJCJUUUUMMMMMMSSSSSSUSSSSFXXXXXXXXXXXVVVVVVVVVVVVGVCGGGEEECCCCCCCCCPPPPPPPPOOO
LLLKLLLLLLLYYYYYYYXXXXXXXQIIIIIIIIIIIUUIIIMMMGGGGGGAAWWWWJJJJJJCCJUUUUMMMMMMSSKKKSUSSSSXXXXXXXXXXXXXVVVVVVVVVVVGCCGGEEEEFCCCCCCCCPPPPPPPPOOO
LLKKLLYLLLYYYYYYYYLLXXXXXXXXIIIIIIIIIUMMMIIMMMGGMMGAAAWWWJJJJJJJCCCMMMMMMMMMMMKKKKWWWZZXXXXXXXXXXXXVVVVVVVVVXGVGGGGEEEEEFCCCCCCCCPPPPPPPPOOO
LKKKKYYYYYYYYYYYYYSLXXLXLLIIIIIIIIIIIUMMMMMMMMMMMGGAAWWWWJJJJJJCCCCCCMMMMMMMMKKWKWSWWZZXZZXXXXXXMMXVVVVVVVVXXGGGGEGEEEEEFCCFCCCCCPPPPYYROOOO
LKKKKKYYYYYYYYYYYYYLXXLXLLIIIIIIIIYYYYMMMMMMMMMMMWWAAAWWWWJJJJCCCCCCMMMMMKKKKKKWWWWWWZZZZZXXXXXXMVVVVVVVVVVXXGXEEEEEEEEEFFFFCCFPPPPPPRRRRROO
KKKKKKKYYYYYYYYYYLYLLLLLLLLIIIIMIIIYYYMMMMMMMMMMMWWWWWWWWWCJJCCCCCCCMMMMKKKKKKWWWWWWWZZZZZXXRXXRMVVVVVXXXXXXXGXXEETEEEEFFFFFFFFPPPPPPPRRRROR
KKKKKKYYYYYYYYYYYLLLLLLLLLIIIMMMMIMMYYYMMMMMMMMMMMWWWWWWWWCCCCCCCCCCMMDKKKKKKKWWWWWWWWZZZZXXRRRRRRRVVVVVLXXXXXXXXETFFFFFFFFFFFFFPPPPPRRRRRRR
KKKKKKYYYYYYYYYYYLLLLLLLLLMMMMMMMMMYYYYYMMMMSSMSMSWWWWWWWCCCCCCCCCCCMMDCFCKKKWWWWWWWWWZWWZZRRRRRRRRVVVXXXXXXXXXXXXXXFFFFFFFFFFFPPPPPPRRRRRRR
KKKKKKKYYYYYYYYYLLLLLLLLLLLLLMMMMMMMMYYSSSSSSSSSSSWWWWWWWCCCCCCCCCCCCCCCFCKKKKWWWWWWWWWWZZZZRRRRRRRVVVHXXXXXXXXXXXXXXFFFFFFFFFFFPPFIIIRRRRRR
KKKKKKKKYYYYYYYYKKLLLLLLLLLLLMMMMMMMMSSSSSSSSSSSSSWWWWWWWWWCCCCCCCCCCCCCCCKKKKKKWWWWWWKWRRRRRRRHRRRRVHHXXXXXXXXXXXXFFFFFFFFFFFFFFFFIIIRRRRRR
KKKKKKKKKKYYKYYKKKLLLLLLLLLLMMMMMMMMMSSSSSSSSSSSSSWWWWWWWWCCCCCCCCCCCCCCCKKKKKKWWWWWWWKKRCRRRRHHHHHHHHXXXXXXXXXXXXXXFFFFFFFFFFFFFIIIIIIIRRDR
KKKKKKKKKKKKKKKKKKLLLLLLLLLLLMMMMMMMMSSSSSSSSSSSSSRRRRWWWWCCCCCCCCCCCCCCCKKKKKKWWWWWWKKKKRRRRRHHHHHHHHHXXXXXXXXXXXXFFFFFFFFFFFFFFIIIIIIIIRDD
KKKKKKKKKKKKKKKKKKLLLLLLLLLLMMMMMMMMMRSSSSSSSSSSSSRRRRRRRVVCCVVVVVCCCCCCCKKKKKKKKWWKKKKKKKRRRRHHHHHHHHXXXXXXXXXXXXFFFFFFFFFFFFFFFIIIIIIIIIDD
KKKKKKKKKKKKKKKKKKLKLLLLLLLMMMMMMMMMMMKSSSSSSSSSSSSSRRRRVVVVVVCCCCCCCCCCCKKKKKKKKKWKKKKKKKRRRRRHHHHHHHXXXXXXXXXXXXXFFFFFFFFFFFFFFFIIIIIIIDDD
KKKKKKKKKKKKKKKKKKKKKKKLMMMMMMMMMMMMMMKSSSSSSSSSSSSRRRRRRRRVCCCCCCCCHHCCCKKKKKKKKKKKKKKKRRRRHHHHHHHHHHXXXXXXXXXXXXXXFFFFFFFFFFFFFIIIIIIIIDDD"""

inp = inp_real

vals = [[el for el in line] for line in inp.split("\n")]

flatten = lambda xss: [x for xs in xss for x in xs]

# find all plant types
all_plant_types = list(set(flatten(vals)))

# for each plant_type, find all coordinates belonging to that plant_type

partition_plant_type = {}

for rowIdx, row in enumerate(vals):
    for colIdx, el in enumerate(row):
        if el in partition_plant_type:
            partition_plant_type[el].append((rowIdx,colIdx))
        else:
            partition_plant_type[el] = [(rowIdx, colIdx)]

# for a partition list, we should make sure that all elements are connected

get_left_coord = lambda x: (x[0],x[1]-1)
get_right_coord = lambda x: (x[0],x[1]+1)
get_up_coord = lambda x: (x[0]-1,x[1])
get_down_coord = lambda x: (x[0]+1,x[1])

def split_separate_regions(partition_list):
    different_regions = []
    this_q = []
    this_q.extend(partition_list)
    while this_q.__len__() > 0:
        this_start_node = this_q.pop()
        visited_cells = [this_start_node]
        to_consider = [this_start_node]
        while len(to_consider) > 0:
            curr_consider = to_consider.pop()
            [left, right, up, down] = [get_left_coord(curr_consider),get_right_coord(curr_consider),get_up_coord(curr_consider),get_down_coord(curr_consider)]
            for dir in [left,right,up,down]:
                # if dir is a valid element of the partition and we havent added it in visited cells yet:
                if dir in this_q and not dir in visited_cells:
                    visited_cells.append(dir)
                    # we should also consider dir
                    to_consider.append(dir)
                    # dir can be removed from this_q
                    this_q.remove(dir)
        different_regions.append(visited_cells)
    return different_regions

        
all_regions = {}
for plant_type in partition_plant_type:
    regions = split_separate_regions(partition_plant_type[plant_type])
    all_regions[plant_type] = regions

def find_area_given_region(region):
    return len(region)

def find_perimeter_given_region(region):
    perimeters = []
    for coord in region:
        [left, right, up, down] = [get_left_coord(coord),get_right_coord(coord),get_up_coord(coord),get_down_coord(coord)]
        if left not in region:
            perimeters.append((left,"left"))
        if right not in region:
            perimeters.append((right,"right"))
        if up not in region:
            perimeters.append((up,"up"))
        if down not in region:
            perimeters.append((down,"down"))

    # merge perimeters that are on the same line AND have the same directionality

    fence_pieces = []
    q = perimeters
    while len(q) > 0:
        current_perim = q.pop()
        # Note you can only be a fence if you have the same directionality.
        this_dir = current_perim[1]
        this_coord = current_perim[0]
        this_fence_coord_group = [this_coord]
        poss_fencemates = [p[0] for p in q if p[1] == this_dir]
        poss_fencemate_search = True
        while poss_fencemate_search:
            poss_fencemate_search=False
            for poss_fencemate in poss_fencemates:
                if this_dir == "right" or this_dir == "left":
                    if get_up_coord(poss_fencemate) in this_fence_coord_group or get_down_coord(poss_fencemate)in this_fence_coord_group:
                        this_fence_coord_group.append(poss_fencemate)
                        poss_fencemates.remove(poss_fencemate)
                        q.remove((poss_fencemate,this_dir))
                        poss_fencemate_search=True
                if this_dir == "up" or this_dir == "down":
                    if get_left_coord(poss_fencemate) in this_fence_coord_group or get_right_coord(poss_fencemate)in this_fence_coord_group:
                        this_fence_coord_group.append(poss_fencemate)
                        poss_fencemates.remove(poss_fencemate)
                        q.remove((poss_fencemate,this_dir))
                        poss_fencemate_search=True
        fence_pieces.append(this_fence_coord_group)

    for fence_piece in fence_pieces:
        print("fence piece:",fence_piece)    
    return len(fence_pieces)
    

            # if dir == "right" or "left", then poss fencemate is only allowed to exist a coord above or coord below.


    

    return len(perimeters)
    

total_price = 0
for plant_type in all_plant_types:
    print(f"plant type: {plant_type}")
    for region in all_regions[plant_type]:
        area = find_area_given_region(region)
        perimeter = find_perimeter_given_region(region)
        total_price += area*perimeter
        print(f"area={area} perimeter={perimeter}, area * perimiter = {area*perimeter}")
print(f"total price={total_price}")